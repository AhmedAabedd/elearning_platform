<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    
    <!-- Inherit and modify the vertical header template -->
    <template id="template_header_vertical_modified" inherit_id="website.template_header_vertical" name="Template Header Vertical Modified" active="True">
        <!-- Remove search from its original position -->
        <xpath expr="//ul[hasclass('navbar-nav')][1]//t[@t-call='website.placeholder_header_search_box']" position="replace"/>
        
        <!-- Add search next to the user dropdown -->
        <xpath expr="//ul[hasclass('navbar-nav')][2]//t[@t-call='portal.placeholder_user_sign_in']" position="before">
            <!-- Search bar - MOVED HERE -->
            <li class="nav-item d-flex align-items-center ms-2">
                <t t-call="website.placeholder_header_search_box" t-nocache="The searchbox should not cache previous searches.">
                    <t t-set="_layout" t-value="'modal'"/>
                    <t t-set="_input_classes" t-value="'border border-end-0 p-3'"/>
                    <t t-set="_submit_classes" t-value="'border border-start-0 px-4 bg-o-color-4'"/>
                    <t t-set="_button_classes" t-value="'o_navlink_background text-reset'"/>
                </t>
            </li>
        </xpath>

        <!-- MODIFY THE USER DROPDOWN WITH CUSTOM USERNAME STYLING -->
        <xpath expr="//t[@t-call='portal.user_dropdown']" position="replace">
            <t t-call="portal.user_dropdown">
                <t t-set="_icon" t-value="true"/>
                <t t-set="_user_name" t-value="true"/>
                <t t-set="_user_name_class" t-value="'user-name-display ms-2'"/> <!-- Custom class -->
                <t t-set="_item_class" t-value="'dropdown'"/>
                <t t-set="_link_class" t-value="'o_navlink_background btn d-flex align-items-center border-0 text-reset'"/>
                <t t-set="_dropdown_menu_class" t-value="'dropdown-menu-end'"/>
                <t t-set="_icon_class" t-value="'user-icon'"/> <!-- Optional: style the icon -->
            </t>
        </xpath>
    </template>

     <!-- /* TAWA NAFS LHKEYA LSEARCH BUTTON */
        /* Apply the same hover effect to search button only */
    #o_main_nav .o_navlink_background.text-reset[type="submit"],
    #o_main_nav .o_navlink_background.text-reset.btn {
        position: relative;
        overflow: hidden;
        z-index: 1;
        transition: color 0.5s ease !important;
        border: none !important;
        filter: none !important;
    }

    /* Default state for the pseudo background */
    #o_main_nav .o_navlink_background.text-reset[type="submit"]::before,
    #o_main_nav .o_navlink_background.text-reset.btn::before {
        content: "";
        position: absolute;
        top: 100%;
        left: -50%;                 /* a bit wider */
        width: 200%;                /* make it larger */
        height: 300%;               /* taller for smoother shape */
        transition: top 0.5s ease;
        z-index: -1;
        border-radius: 60% 60% 40% 40%; /* smoother roundness */
        background: #111827;
    }

    /* Hover movement */
    #o_main_nav .o_navlink_background.text-reset[type="submit"]:hover::before,
    #o_main_nav .o_navlink_background.text-reset.btn:hover::before {
        top: -60%;  /* move higher so it covers fully */
    }

    /* Hover text */
    #o_main_nav .o_navlink_background.text-reset[type="submit"]:hover,
    #o_main_nav .o_navlink_background.text-reset.btn:hover {
        color: white !important;
        filter: none !important;
    }

    /* Icon styling */
    #o_main_nav .o_navlink_background.text-reset[type="submit"] i,
    #o_main_nav .o_navlink_background.text-reset.btn i {
        transition: color 0.5s ease !important; /* smooth transition */
    }

    #o_main_nav .o_navlink_background.text-reset[type="submit"]:hover i,
    #o_main_nav .o_navlink_background.text-reset.btn:hover i {
        color: white !important;
    } -->


</odoo>
